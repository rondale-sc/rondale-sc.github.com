<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <title>Phantom Js CLI options</title>

  <!-- Twitter Bootstrap -->
  <link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css" />

  <!-- My Custom CSS -->
  <link rel="stylesheet" href="/css/custom.css" type="text/css" />

  <link href="/images/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">

  <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>

  
    <meta name="description" content="Quick tip about customizing phantom js through poltergeist." />
  

  
    <meta http-equiv="date" content="Friday, 13  2013 00:00:00 GMT" />
  

  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25565068-1']);
  _gaq.push(['_setDomainName', 'jonathan-jackson.net']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body>
  <div class="wrapper">
    <div id="header">
      <h1>run<span class="kern">_</span>with_it <span style="font-size:12px;">Learning, sharing, coding.</span></h1>
      <div class="row">
        <div class="nav-offset site-nav"><a href="/" alt="home">Home</a></div>
        <div class="site-nav"><a href="/about-me.html" alt="about-me">About Me</a></div>
        <div class="site-nav"><a href="/mail.html" alt="contact-me">Email Me</a></div>
      </div>
    </div>
    <div id="header-border"></div>

    <div class="container">
      <div id="content">
       <div id="post">
<h1 class="title">Phantom Js CLI options
<span style="float:right;"><a href="http://twitter.com/share" class="twitter-share-button"
                                         data-count="horizontal"
                                         data-via="rondale_sc">Tweet</a>
</span>

</h1>

<p>Recently ran into an issue where my cucumber suite was throwing a timeout error.  The error was thrown because an image hosted externally wasn&#39;t rendering.  Luckily Phantomjs has some amazing <a href="https://github.com/ariya/phantomjs/wiki/API-Reference">Command Line Options</a> available to help us along.  On of which is <code>--load-images</code> which allows us to prevent phantom from making the image request.</p>

<p>Let&#39;s setup poltergeist (Phantomjs&#39; capybara driver) to accept these options...</p>

<p><script src='https://gist.github.com/6553515.js?file=cli_options.rb'></script><noscript></p>
<div class="highlight"><pre><code class="sh language-sh" data-lang="sh">Capybara.javascript_driver <span class="o">=</span> :poltergeist
Capybara.register_driver :poltergeist <span class="k">do</span> |app|
  <span class="nv">options</span> <span class="o">=</span> <span class="o">{</span> 
    phantomjs_options: <span class="o">[</span><span class="s1">&#39;--load-images=no&#39;</span><span class="o">]</span> 
   <span class="o">}</span>
  Capybara::Poltergeist::Driver.new<span class="o">(</span>app,options<span class="o">)</span>                                                                                                              end
</code></pre></div>
<p></noscript></p>

<p>As you can see we can specify a list of the CLI options and they&#39;ll be set when we run our suite.  And there you have it, prevent phantomjs from requesting images!</p>

<p>Thanks for reading!</p>

</div>

      </div>

      <div id="side-bar">
       <div><img src="/images/jonathan-jackson.jpg" width="167px;" height="167px;"/></div>
<div><a href="https://twitter.com/rondale_sc" class="twitter-follow-button" alt="follow me on twitter" data-width="150px" data-show-count="false">Follow @rondale_sc</a></div>
<div style="margin-top:5px;">
  <h3>Hi, I'm Jon.</h3>
  <p>I love learning new things.  Here is where I'll share what I learn.  Typically code, sometimes my experience, sometimes just a neat trick.</p>
</div>
<a href="/mail.html">
  <img src="http://pairprogramwith.me/badge.png">
</a>
<div>
  <h3>Projects</h3>
  <ul>
    <li><a href="http://rondale-sc.github.com/EspnRb/" alt="espn_rb, a lightweight ruby wrapper around the ESPN api." title="EspnRb">EspnRb</a></li>
    <li><a href="http://jonathan-jackson.net/image_viewer_rails/" alt="ImageViewer image browser w/controls" title="Image Viewer">ImageViewer</a></li>
    <li><a href="https://github.com/rjackson/pivot.js" alt="Pivot.js - reporting lib" title="Pivot.js">Pivot.js</a></li>
    <li><a href="https://github.com/rondale-sc/run_with_it_redux" alt="This blog's Github Repo" title="Run With It Repo">Run With It</a></li>
    <li><a href="https://github.com/TampaRuby/turbot.git" alt="IRC bot for TampaRb channel" title="Turbot">Turbot</a></li>
    <li><a href="https://github.com/rondale-sc/remote_pair_chef" alt="Tool for provisioning EC2 instances quickly" title="RPC">Remove Pair Chef</a></li>
    <li><a href="https://github.com/promedical/hippo" alt="Tool for interacting with HIPAA documents" title="Hippo">Hippo</a></li>
  </ul>
</div>
<div><a href="http://feeds.feedburner.com/jonathan-jackson/WZqA" title="Subscribe to my feed" rel="alternate" type="application/rss+xml"><img src="/images/feeds.png" alt="" style="border:0;width:100px;height:100px;"/></a></div>

      </div>
    </div>
    <div class="push"></div>
  </div>
  <div class="footer">
    <p>Site designed by Jonathan Jackson.  With help from <a href="http://twitter.github.com/bootstrap/" alt="twitter bootstrap">@twbootstrap</a>, <a href="https://github.com/mojombo/jekyll" alt="jekyll">Jekyll</a>, and <a href="https://github.com/" alt="github">github</a></p>
  </div>
</body>
</html>